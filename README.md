# å…œå…œ & æ±‰å ¡ ã® å¤§å†’é™© ğŸ€

ä¸€ä¸ªè®°å½•çˆ±æƒ…æ•…äº‹çš„ä¸ªäººç½‘ç«™ï¼ŒåŒ…å«æ—¶é—´çº¿ã€ç…§ç‰‡å¢™ã€ç•™è¨€æ¿å’Œç§å¯†ä¿¡ä»¶ç­‰åŠŸèƒ½ã€‚

## ğŸ“¸ é¢„è§ˆ

è®¿é—®åœ°å€ï¼š[https://hanbaodoudou.com](https://hanbaodoudou.com)

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
æµè§ˆå™¨ â”€HTTPSâ”€> hanbaodoudou.com (GitHub Pages)
                      â”‚
                      â””â”€â”€> api.hanbaodoudou.com (é˜¿é‡Œäº‘ ECS + Caddy)
                                    â”‚
                                    â””â”€â”€> Node.js Express (PM2)
                                              â”œâ”€â”€ SQLite æ•°æ®åº“
                                              â””â”€â”€ uploads/ æ–‡ä»¶å­˜å‚¨
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | HTML5 + CSS3 + jQuery + Bootstrap 5 |
| åç«¯ | Node.js + Express + SQLite |
| éƒ¨ç½² | GitHub Pages (å‰ç«¯) + é˜¿é‡Œäº‘ ECS (åç«¯) |
| åå‘ä»£ç† | Caddy (è‡ªåŠ¨ HTTPS) |
| è¿›ç¨‹ç®¡ç† | PM2 |

## ğŸ“ ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ docs/                    # å‰ç«¯é™æ€èµ„æºï¼ˆGitHub Pagesï¼‰
â”‚   â”œâ”€â”€ index.html           # ä¸»é¡µ
â”‚   â”œâ”€â”€ css/                 # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ api.config.js    # API ç«¯ç‚¹é…ç½®
â”‚   â”‚   â”œâ”€â”€ api-client.js    # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ theme.js         # ä¸»é¢˜å’Œäº¤äº’é€»è¾‘
â”‚   â”œâ”€â”€ images/              # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ vendor/              # ç¬¬ä¸‰æ–¹åº“
â”œâ”€â”€ server/                  # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/                 # Express æºç 
â”‚   â”œâ”€â”€ database/            # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ uploads/             # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚   â””â”€â”€ deploy/              # éƒ¨ç½²é…ç½®
â”œâ”€â”€ CNAME                    # GitHub Pages åŸŸåé…ç½®
â””â”€â”€ DEPLOY_NAS.md            # NAS å­˜å‚¨é…ç½®æŒ‡å—ï¼ˆå¯é€‰ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

1. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
cd server
npm install
npm run dev
```

2. **é¢„è§ˆå‰ç«¯**
- ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€ `docs/index.html`
- æˆ–ä½¿ç”¨ VSCode Live Server ç­‰é™æ€æœåŠ¡å™¨

3. **å¥åº·æ£€æŸ¥**
```bash
curl http://localhost:8080/health
```

### ç®¡ç†å‘˜æ“ä½œ

åœ¨æµè§ˆå™¨æ§åˆ¶å°æ³¨å…¥ API å¯†é’¥åå¯è¿›è¡Œå†™æ“ä½œï¼š
```javascript
QQStoryApi.setAdminKey('ä½ çš„å¯†é’¥', { persist: 'session' });
```

## ğŸŒ éƒ¨ç½²

### å‰ç«¯éƒ¨ç½²ï¼ˆGitHub Pagesï¼‰

1. å°†ä»£ç  push åˆ° GitHub
2. åœ¨ä»“åº“è®¾ç½®ä¸­å¯ç”¨ GitHub Pagesï¼Œé€‰æ‹© `docs/` ç›®å½•
3. é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆCNAME æ–‡ä»¶ï¼‰

### åç«¯éƒ¨ç½²ï¼ˆé˜¿é‡Œäº‘ ECSï¼‰

è¯¦è§ [server/README.md](server/README.md)

ä¸»è¦æ­¥éª¤ï¼š
1. åœ¨ ECS ä¸Šå®‰è£… Node.js å’Œ PM2
2. é…ç½® `.env` ç¯å¢ƒå˜é‡
3. ä½¿ç”¨ PM2 å¯åŠ¨æœåŠ¡
4. é…ç½® Caddy åå‘ä»£ç†æä¾› HTTPS

## âš™ï¸ ç¯å¢ƒå˜é‡

åç«¯ç¯å¢ƒå˜é‡é…ç½®ï¼ˆ`server/.env`ï¼‰ï¼š

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `PORT` | æœåŠ¡ç«¯å£ | `8080` |
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | `production` |
| `ADMIN_API_KEYS` | ç®¡ç†å‘˜ API å¯†é’¥ | - |
| `DATABASE_FILE` | æ•°æ®åº“è·¯å¾„ | `database/qq_story.db` |
| `UPLOAD_DIR` | ä¸Šä¼ ç›®å½• | `uploads` |
| `ALLOWED_ORIGINS` | å…è®¸çš„è·¨åŸŸæ¥æº | `https://hanbaodoudou.com` |
| `MAX_UPLOAD_SIZE_MB` | æœ€å¤§ä¸Šä¼ å¤§å° | `100` |

## ğŸ“± åŠŸèƒ½ç‰¹æ€§

- **QQ Footprint**ï¼šæ—¶é—´çº¿è®°å½•é‡è¦é‡Œç¨‹ç¢‘
- **Moments**ï¼šç…§ç‰‡å¢™å±•ç¤ºç²¾å½©ç¬é—´
- **Comments**ï¼šå…¬å¼€ç•™è¨€æ¿ï¼Œæœ‹å‹å¯ä»¥ç•™è¨€ç¥ç¦
- **Letters**ï¼šç§å¯†ä¿¡ä»¶ï¼Œéœ€å¯†ç è§£é”
- **Story Manager**ï¼šç®¡ç†å‘˜åå°ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰å†…å®¹
- **Liuyizhouye**ï¼šç‰¹åˆ«çºªå¿µé¡µé¢

## ğŸ”’ å®‰å…¨è¯´æ˜

- `ADMIN_API_KEYS` ä»…ç”¨äºç®¡ç†å‘˜å†™æ“ä½œï¼Œè¯·å¦¥å–„ä¿å¯†
- å‰ç«¯å¯†ç ä¿æŠ¤ä»…ä½œ UI é˜²æŠ¤ï¼ŒçœŸæ­£çš„å®‰å…¨ç”±åç«¯ API å¯†é’¥ä¿éšœ
- å®šæœŸå¤‡ä»½ `database/` å’Œ `uploads/` ç›®å½•

## ğŸ“„ è®¸å¯è¯

ç§äººé¡¹ç›®ï¼Œä»…ä¾›ä¸ªäººä½¿ç”¨ã€‚

---

Made with â¤ï¸ by å…œå…œ & æ±‰å ¡
